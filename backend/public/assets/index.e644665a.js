var A=Object.defineProperty;var I=Object.getOwnPropertySymbols;var N=Object.prototype.hasOwnProperty,L=Object.prototype.propertyIsEnumerable;var B=(t,e,o)=>e in t?A(t,e,{enumerable:!0,configurable:!0,writable:!0,value:o}):t[e]=o,C=(t,e)=>{for(var o in e||(e={}))N.call(e,o)&&B(t,o,e[o]);if(I)for(var o of I(e))L.call(e,o)&&B(t,o,e[o]);return t};import{o as u,c as y,r as E,a as n,b as c,d as m,e as h,w as g,f as O,t as d,F as P,g as R,h as D,i as T,v as k,j as $,k as V,l as q,m as M,n as H}from"./vendor.e5b5c710.js";const J=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const l of s)if(l.type==="childList")for(const i of l.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&r(i)}).observe(document,{childList:!0,subtree:!0});function o(s){const l={};return s.integrity&&(l.integrity=s.integrity),s.referrerpolicy&&(l.referrerPolicy=s.referrerpolicy),s.crossorigin==="use-credentials"?l.credentials="include":s.crossorigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function r(s){if(s.ep)return;s.ep=!0;const l=o(s);fetch(s.href,l)}};J();var p=(t,e)=>{const o=t.__vccOpts||t;for(const[r,s]of e)o[r]=s;return o};const U={},j={class:"main-header"},z=c("default"),K=n("hr",null,null,-1);function Y(t,e){return u(),y("header",j,[E(t.$slots,"header",{},()=>[z]),K])}var F=p(U,[["render",Y]]);const W={name:"app",created(){this.$store.dispatch({type:"loadToys"})},methods:{},components:{appHeader:F}},G={class:"app-container container"};function Q(t,e,o,r,s,l){const i=m("app-header"),a=m("router-view");return u(),y("section",G,[h(i),h(a)])}var X=p(W,[["render",Q]]);const Z={name:"home",components:{appHeader:F}},tt={class:"py-4 flex flex-col gap-2"},et=n("h1",null,"write to slot!",-1),ot=n("hr",null,null,-1);function nt(t,e,o,r,s,l){const i=m("app-header");return u(),y("section",tt,[h(i,null,{header:g(()=>[et]),_:1}),ot])}var st=p(Z,[["render",nt]]);const rt={};function lt(t,e){return u(),y("div",null," about ")}var it=p(rt,[["render",lt]]);const w={query:v,get:at,post:ct,put:ut,remove:yt,postMany:dt};function v(t){var e=JSON.parse(localStorage.getItem(t))||[];return Promise.resolve(e)}function at(t,e){return v(t).then(o=>o.find(r=>r._id===e))}function ct(t,e){return e._id=pt(),v(t).then(o=>(o.push(e),x(t,o),e))}function dt(t,e){return v(t).then(o=>(o.push(...e),x(t,o),o))}function ut(t,e){return v(t).then(o=>{const r=o.findIndex(s=>s._id===e._id);return o.splice(r,1,e),x(t,o),e})}function yt(t,e){return v(t).then(o=>{const r=o.findIndex(s=>s._id===e);o.splice(r,1),x(t,o)})}function x(t,e){localStorage.setItem(t,JSON.stringify(e))}function pt(t=4){for(var e="",o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",r=0;r<t;r++)e+=o.charAt(Math.floor(Math.random()*o.length));return e}const b={saveToStorage:_t,loadFromStorage:mt,makeId:ht};function _t(t,e){localStorage.setItem(t,JSON.stringify(e)||null)}function mt(t){let e=localStorage.getItem(t);return e?JSON.parse(e):void 0}function ht(t=4){for(var e="",o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",r=0;r<t;r++)e+=o.charAt(Math.floor(Math.random()*o.length));return e}const f="toys_db";$t();const ft="/api/toy/",_={query:vt,getById:bt,remove:gt,save:Tt,getEmptyToy:kt};function vt(t){return O.get(ft,{params:t}).then(e=>e.data)}function bt(t){return w.get(f,t)}function gt(t){return w.remove(f,t)}function Tt(t){return t._id?w.put(f,t):w.post(f,t)}function kt(){return{name:"",price:0,type:"",createdAt:new Date,inStock:!0}}function $t(){let t=b.loadFromStorage(f);return(!t||!t.length)&&(t=[{_id:b.makeId(),name:"Fiat",price:30,lables:["Funny"],inStock:!0,reviews:["nice toy","bad toy"]},{_id:b.makeId(),name:"Honda",price:87,lables:["Funny"],inStock:!1,reviews:["nice toy","bad toy"]},{_id:b.makeId(),name:"Toyota",price:54,lables:["Sad"],inStock:!0,reviews:["nice toy","bad toy"]}],b.saveToStorage(f,t)),t}const wt={name:"toy-preview",props:{toy:Object},components:{},methods:{goToDetail(){},goToEdit(){this.$router.push(`/toy/edit/${this.toy._id}`)},removeToy(t){}}},xt={class:"toy-preview"},St=n("span",{class:"fw-bold"},"Name:",-1),It=n("span",{class:"fw-bold"},"Labels:",-1),Bt=n("span",{class:"fw-bold"},"Price:",-1),Ct=n("span",{class:"fw-bold"},"Instock:",-1),Dt={class:"btn-group"},Ft=n("button",{class:"btn btn-info"},"Details",-1);function At(t,e,o,r,s,l){const i=m("router-link");return u(),y("li",xt,[n("div",null,[c(d(o.toy)+" "+d(o.toy._id)+" ",1),n("p",null,[St,c(" "+d(o.toy.name),1)]),n("p",null,[It,c(" "+d(o.toy.lables),1)]),n("p",null,[Bt,c(" "+d(o.toy.price),1)]),n("p",null,[Ct,c(" "+d(o.toy.inStock),1)])]),n("div",Dt,[n("button",{onClick:e[0]||(e[0]=(...a)=>l.goToEdit&&l.goToEdit(...a)),class:"btn btn-primary"},"edit"),h(i,{to:"/toy/"+o.toy._id},{default:g(()=>[Ft]),_:1},8,["to"]),n("button",{onClick:e[1]||(e[1]=a=>l.removeToy(o.toy.id)),class:"btn btn-danger"},"delete")])])}var Nt=p(wt,[["render",At]]);const Lt={props:{toys:{type:Array,required:!0}},data(){return{lables:this.$store.getters.lables,testData:{labels:["Paris","N\xEEmes","Toulon","Perpignan","Autre"],datasets:[{data:[30,40,60,70,5],backgroundColor:["#77CEFF","#0079AF","#123E6B","#97B0C4","#A5C8ED"]}]}}},components:{toyPreview:Nt},methods:{removeToy(t){this.$emit("removeToy",t)}}},Et={class:"toy-list clean-list grid gap-1"};function Ot(t,e,o,r,s,l){const i=m("toy-preview");return u(),y("section",null,[n("ul",Et,[(u(!0),y(P,null,R(o.toys,a=>(u(),D(i,{onRemoveToy:l.removeToy,toy:a,key:a._id},null,8,["onRemoveToy","toy"]))),128))])])}var Pt=p(Lt,[["render",Ot]]);const Rt={data(){return{filterBy:{name:"",inStock:!1}}},methods:{filter(){console.log(this.filterBy),this.$store.dispatch({type:"loadToys",filter:this.filterBy})}}},Vt=c(" Search ");function qt(t,e,o,r,s,l){return u(),y("label",null,[Vt,T(n("input",{onInput:e[0]||(e[0]=(...i)=>l.filter&&l.filter(...i)),type:"text","onUpdate:modelValue":e[1]||(e[1]=i=>s.filterBy.name=i),placeholder:"Search..."},null,544),[[k,s.filterBy.name]]),n("button",{onClick:e[2]||(e[2]=i=>{l.filter(),this.filterBy.inStock=!this.filterBy.inStock})},"sortByStock")])}var Mt=p(Rt,[["render",qt]]);const Ht={name:"toy-app",data(){return{}},computed:{toys(){return this.$store.getters.toysForDisplay}},created(){},methods:{loadToys(){_.query().then(t=>this.toys=t)},goToEdit(){this.$router.push("/toy/edit")},removeToy(t){this.$store.dispatch({type:"removeToy",id:t})}},components:{toyList:Pt,toyFilter:Mt}},Jt={class:"toy-app"},Ut=c(" checkkk ");function jt(t,e,o,r,s,l){const i=m("toy-filter"),a=m("toy-list");return u(),y("section",Jt,[Ut,h(i),l.toys?(u(),D(a,{key:0,onRemoveToy:l.removeToy,toys:l.toys},null,8,["onRemoveToy","toys"])):$("",!0)])}var zt=p(Ht,[["render",jt]]);const Kt={name:"toy-details",data(){return{toy:null,toy_id:null}},created(){this.toy_id=this.$route.params.toyId,console.log(this.toy_id),_.getById(this.toy_id).then(t=>{this.toy=t})},components:{},methods:{goToDetail(){},goToEdit(){this.$router.push(`/toy/edit/${this.toy._id}`)},removeToy(t){}}},Yt={key:0,class:"toy-details"},Wt=n("span",{class:"fw-bold"},"Name:",-1),Gt=n("span",{class:"fw-bold"},"Labels:",-1),Qt=n("span",{class:"fw-bold"},"Price:",-1),Xt=n("span",{class:"fw-bold"},"Instock:",-1),Zt=n("span",{class:"fw-bold"},"Reviews:",-1),te={class:"btn-group"},ee=n("button",{class:"btn btn-info"},"Back to list",-1);function oe(t,e,o,r,s,l){const i=m("router-link");return s.toy?(u(),y("li",Yt,[n("div",null,[n("p",null,[Wt,c(" "+d(s.toy.name),1)]),n("p",null,[Gt,c(" "+d(s.toy.lables),1)]),n("p",null,[Qt,c(" "+d(s.toy.price),1)]),n("p",null,[Xt,c(" "+d(s.toy.inStock),1)]),n("p",null,[Zt,c(" "+d(s.toy.reviews),1)])]),n("div",te,[n("button",{onClick:e[0]||(e[0]=(...a)=>l.goToEdit&&l.goToEdit(...a)),class:"btn btn-primary"},"edit"),n("button",{onClick:e[1]||(e[1]=(...a)=>l.goToDetail&&l.goToDetail(...a)),class:"btn btn-info"},"details"),n("button",{onClick:e[2]||(e[2]=a=>l.removeToy(s.toy._id)),class:"btn btn-danger"},"delete"),h(i,{to:"/toy/"},{default:g(()=>[ee]),_:1})])])):$("",!0)}var ne=p(Kt,[["render",oe]]);const se={name:"toy-edit",data(){return{toy:null,toy_id:null}},created(){this.toy_id=this.$route.params.toyId,console.log(this.toy_id),_.getById(this.toy_id).then(t=>{this.toy=t})},computed:{lablesToShow(){return"ssssss"}},components:{},methods:{arrayToString(t){console.log(t),t.join(""),console.log(t),console.log(t)},saveToy(){this.toy.lables=this.toy.lables.split(" "),this.$store.dispatch({type:"saveToy",toyToEdit:this.toy})},goToDetail(){},goToEdit(){this.$router.push(`/toy/edit/${this.toy.id}`)},removeToy(t){}}},re={key:0,class:"toy-edit"},le={key:0},ie=n("span",{class:"fw-bold"},"Name:",-1),ae=n("span",{class:"fw-bold"},"Lables:",-1),ce=["placeholder"],de=n("span",{class:"fw-bold"},"Price:",-1),ue=n("span",{class:"fw-bold"},"Instock:",-1),ye=n("span",{class:"fw-bold"},"Reviews:",-1),pe=c("Approve"),_e={class:"btn-group"},me=n("button",{class:"btn btn-info"},"Back to list",-1);function he(t,e,o,r,s,l){const i=m("router-link");return s.toy?(u(),y("li",re,[s.toy?(u(),y("div",le,[n("p",null,[ie,T(n("input",{type:"text","onUpdate:modelValue":e[0]||(e[0]=a=>s.toy.name=a),style:{width:"50%"}},null,512),[[k,s.toy.name]])]),n("p",null,[ae,T(n("input",{type:"text","onUpdate:modelValue":e[1]||(e[1]=a=>s.toy.lables=a),style:{width:"50%"},placeholder:s.toy.lables},null,8,ce),[[k,s.toy.lables]])]),n("p",null,[de,T(n("input",{type:"text","onUpdate:modelValue":e[2]||(e[2]=a=>s.toy.price=a),style:{width:"50%"}},null,512),[[k,s.toy.price]])]),n("p",null,[ue,c(" "+d(s.toy.inStock),1)]),n("p",null,[ye,c(" "+d(s.toy.reviews),1)]),c(" toy edit component!! toy._id: "+d(s.toy._id),1)])):$("",!0),n("button",null,[h(i,{to:"/toy/",onClick:l.saveToy},{default:g(()=>[pe]),_:1},8,["onClick"])]),n("div",_e,[n("button",{onClick:e[3]||(e[3]=a=>l.removeToy(s.toy._id)),class:"btn btn-danger"},"delete"),h(i,{to:"/toy/"},{default:g(()=>[me]),_:1})])])):$("",!0)}var fe=p(se,[["render",he]]);const ve=V({history:q(),linkActiveClass:"active",routes:[{path:"/",name:"home",component:st},{path:"/toy/edit/:toyId",name:"toy-edit",component:fe},{path:"/toy/:toyId",name:"toy-details",component:ne},{path:"/toy",name:"toy-app",component:zt},{path:"/about",name:"about",component:it}]});var be={state:{toys:[],currToy:_.getEmptyToy(),toysForDisplay:null,currFilter:null,labels:["funny","sad","On wheels","Box game","Art","Baby","Doll","Puzzle","Outdoor"]},getters:{toysForDisplay(t,{filter:e}){return t.toys},labels(t){return t.lables},getCurrToy(t){return C({},t.currToy)}},mutations:{setCurrToy(t,{toyId:e}){e?_.getById(e).then(o=>{console.log(o),t.currToy={toy:o}}):t.currToy=_.getEmptyToy()},setToys(t,{toys:e}){t.toys=e},removeToy(t,{id:e}){const o=t.toys.findIndex(r=>r.id===e);t.toys.splice(o,1)},saveToy(t,{toy:e}){const o=t.toys.findIndex(r=>r.id===e.id);o!==-1?t.toys.splice(o,1,e):t.toys.push(e)},updateToy(t,{toyToUpdate:e}){const o=t.toys.findIndex(r=>r._id===e._id);console.log("idxidxidx",o),o>=0?t.toys.splice(o,1,e):t.toys.push(e),console.log("toys after!:",t.toys)}},actions:{saveToy(t,{toyToEdit:e}){return console.log(e),_.save(e).then(o=>(console.log("after",e._id),t.commit({type:"updateToy",toyToUpdate:o}),o)).catch(o=>{throw console.error("Cannot Add Product",o),o})},loadToys({state:t,commit:e},{filter:o}){return console.log(o),_.query(o).then(r=>{console.log(r),e({type:"setToys",toys:r})}).catch(r=>{throw console.error("Cannot Load Toys",r),r}).finally(()=>{e({type:"setIsLoading",isLoading:!1})})},removeToy({commit:t},{id:e}){_.remove(e).then(()=>{t({type:"removeToy",id:e})})}}};const ge=M({strict:!0,state:{},getters:{},mutations:{},actions:{},modules:{toyStore:be}});const S=H(X);S.use(ve);S.use(ge);S.mount("#app");
